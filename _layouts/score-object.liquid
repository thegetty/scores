---
## CUSTOMIZED FILE
## Based on `quire-entry` that adds figure thumbnails for lightbox navigation
##
classes:
  - quire-entry
  - quire-score-object
layout: base.11ty.js
description: Entry layout. This template is intended for use in catalogue-style pages where a single image or object needs to be featured prominently.
---

{% assign sideBySide = config.entryPage.sideBySide %}

{% comment %}
Entry content, including entry image and tombstone data
{% endcomment %}

<div {% if sideBySide == true or presentation == 'side-by-side' %} class="side-by-side" {% endif %}>

  {% comment %} Full-width entry image header {% endcomment %}
  <div class="quire-entry__image-wrap{%- for object in pageObjects -%}{%- if object.figures.size > 1 -%} quire-entry__image-wrap--with-thumbnails{%- endif -%}{%- endfor -%}" data-outputs-include="html">
    <div class="quire-entry__lightbox">
      {% if image %}
      {% comment %} 
        To do: add support for images without ids defined in front matter
        {% assign figures = image | split: ',' %}
        {% lightbox figures %}
      {% endcomment %}
      {% elsif pageObjects %}
        {% for object in pageObjects %}
          {% lightbox object.figures %}
        {% endfor %}
      {% endif %}
    </div>
  </div>

  {%- for object in pageObjects -%}
  {%- if object.figures.size > 1 -%}
  <div class="quire-entry__thumbnails thumbnail-box">
  <div class="quire-entry__thumbnails__inner">
    {%- for thisFig in object.figures -%}
      {%- for figure in figures.figure_list -%}
        {%- if thisFig.id == figure.id -%}
          <a class="ref thumbnail" data-annotation-ids="" data-figure-id="{{ figure.id }}">
          <figure>
          <img src="/_assets/images/{{ figure.src }}" alt="thumb">
          <figcaption>{{ figure.label }}</figcaption>
          </figure>
          </a>
        {%- endif -%}
      {%- endfor -%}
    {%- endfor -%}
  </div>
  </div>
  {%- endif -%}
  {%- endfor -%}

  <div class="quire-entry__content">
    <header class="quire-entry__header">
      <div class="container">
        <h1 class="quire-page__header__title" id="page-header-{{ page.filePathStem }}">
          {% pageTitle label=label, title=title, subtitle=subtitle %}
        </h1>
        <div class="quire-page__header__contributor">
          {% contributors context=pageContributors, format=byline_format %}
        </div>
      </div>
    </header>

    {% tombstone pageObjects %}

    {% if abstract %}
      {% abstract abstract=abstract %}
    {% endif %}

    <section class="section quire-page__content">
      <div class="container">
        <div class="content">
          {{ content }}
          {% bibliography citations %}
        </div>
      </div>
    </section>

    <section class="section quire-page__content">
      <div class="container">
        {% pageButtons pagination=pagination %}
      </div>
    </section>
  </div>
</div>
